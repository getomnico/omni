# Production-specific overrides
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up

services:
  # Use pre-built images from GitHub Container Registry
  migrator:
    image: ghcr.io/omnihq/omni/omni-migrator:latest
    build: null

  searcher:
    image: ghcr.io/omnihq/omni/omni-searcher:latest
    build: null

  indexer:
    image: ghcr.io/omnihq/omni/omni-indexer:latest
    build: null

  ai:
    image: ghcr.io/omnihq/omni/omni-ai:latest
    build: null
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
      vllm:
        condition: service_healthy

  google-connector:
    image: ghcr.io/omnihq/omni/omni-google-connector:latest
    build: null

  slack-connector:
    image: ghcr.io/omnihq/omni/omni-slack-connector:latest
    build: null

  atlassian-connector:
    image: ghcr.io/omnihq/omni/omni-atlassian-connector:latest
    build: null

  web:
    image: ghcr.io/omnihq/omni/omni-web:latest
    build: null

  # Enable vLLM in production
  vllm:
    profiles: []  # Remove profile to enable in production