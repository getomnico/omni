# Database Configuration
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USERNAME=omni_dev
DATABASE_PASSWORD=omni_dev
DATABASE_NAME=omni_dev
DATABASE_SSL=false
DB_MAX_CONNECTIONS=10
DB_ACQUIRE_TIMEOUT_SECONDS=3

# Redis Configuration
REDIS_URL=redis://redis:6379

# Core Service Ports
SEARCHER_PORT=3001
INDEXER_PORT=3002
AI_SERVICE_PORT=3003
WEB_PORT=3000

# Connector Service Ports
GOOGLE_CONNECTOR_PORT=4001
SLACK_CONNECTOR_PORT=4002
ATLASSIAN_CONNECTOR_PORT=4003
WEB_CONNECTOR_PORT=4004

# Service URLs (for inter-service communication)
SEARCHER_URL=http://searcher:${SEARCHER_PORT}
INDEXER_URL=http://indexer:${INDEXER_PORT}
AI_SERVICE_URL=http://ai:${AI_SERVICE_PORT}
GOOGLE_CONNECTOR_URL=http://google-connector:${GOOGLE_CONNECTOR_PORT}
SLACK_CONNECTOR_URL=http://slack-connector:${SLACK_CONNECTOR_PORT}
ATLASSIAN_CONNECTOR_URL=http://atlassian-connector:${ATLASSIAN_CONNECTOR_PORT}
WEB_CONNECTOR_URL=http://web-connector:${WEB_CONNECTOR_PORT}

# Session Configuration
SESSION_SECRET=your-session-secret-key-change-in-production
SESSION_COOKIE_NAME=auth-session
SESSION_DURATION_DAYS=7

# Application Configuration
APP_URL=http://localhost:3000
OMNI_DOMAIN=localhost
ACME_EMAIL=admin@yourcompany.com

# Feature Flags
AI_ANSWER_ENABLED=true
AI_FIRST_SEARCH_ENABLED=true

# AI Service Configuration
AI_WORKERS=2 # The number of workers to spawn in the omni-ai service

# Searcher Service Configuration
RAG_CONTEXT_WINDOW=2 # The number of surrounding chunks to fetch in RAG search
SEMANTIC_SEARCH_TIMEOUT_MS=1000 # Semantic search (vector search) will timeout if it takes longer than this

# Google Workspace Connector
GOOGLE_SYNC_INTERVAL_SECONDS=86400
GOOGLE_WEBHOOK_URL=https://yourdomain.com/google-webhook
WEBHOOK_RENEWAL_CHECK_INTERVAL_SECONDS=3600
GOOGLE_MAX_AGE_DAYS=712 # Documents older than this will not be indexed

# Slack Connector
SLACK_CLIENT_ID=your-slack-client-id
SLACK_CLIENT_SECRET=your-slack-client-secret
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token

# Atlassian Connector
ATLASSIAN_CLIENT_ID=your-atlassian-client-id
ATLASSIAN_CLIENT_SECRET=your-atlassian-client-secret

# Web Connector Configuration
WEB_SYNC_INTERVAL_SECONDS=86400  # Daily recrawl (24 hours)

# Log level for all rust services
RUST_LOG=info
RUST_BACKTRACE=

# AI Service Configuration
MODEL_PATH=/models
EMBEDDING_MODEL=intfloat/e5-large-v2
EMBEDDING_DIMENSIONS=1024

# Can be one of: anthropic, openai, bedrock or vllm.
LLM_PROVIDER=anthropic

# Only required if LLM_PROVIDER=vllm
VLLM_PORT=8000
VLLM_URL=http://vllm:${VLLM_PORT}
VLLM_MODEL=microsoft/Phi-3-mini-4k-instruct
VLLM_DTYPE=auto
VLLM_API_KEY=vllm-api-key
VLLM_MAX_MODEL_LEN=2048
CUDA_VISIBLE_DEVICES=0

# Only required if LLM_PROVIDER=anthropic
ANTHROPIC_API_KEY=your-anthropic-api-key
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# Only required if LLM_PROVIDER=bedrock
BEDROCK_MODEL_ID=us.anthropic.claude-sonnet-4-20250514-v1:0
TITLE_GENERATION_MODEL_ID=us.anthropic.claude-haiku-4-5-20251001-v1:0

# One of: bedrock, openai, anthropic, jina
EMBEDDING_PROVIDER=anthropic

# Only required if EMBEDDING_PROVIDER=jina
JINA_API_KEY=your-jina-ai-api-key
JINA_API_URL=your-jina-ai-api-url
JINA_MODEL=your-jina-ai-model

# Storage Backend. One of: s3, postgres
STORAGE_BACKEND=postgres

# Only required if STORAGE_BACKEND=s3
S3_BUCKET=your-s3-bucket
S3_REGION=your-s3-region

# Encryption Configuration. Used to encrypt sensitive keys to the connectors. 
# Service account credentials, API keys/tokens, etc.
ENCRYPTION_KEY=your-encryption-key-must-be-at-least-32-characters-long
ENCRYPTION_SALT=your-salt-16-chars

# OpenTelemetry Configuration
# Leave OTEL_EXPORTER_OTLP_ENDPOINT empty for local-only telemetry
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_DEPLOYMENT_ID=
OTEL_DEPLOYMENT_ENVIRONMENT=production
SERVICE_VERSION=0.1.0

ENABLE_EMBEDDING_BATCH_INFERENCE=true
EMBEDDING_BATCH_S3_BUCKET=
EMBEDDING_BATCH_BEDROCK_ROLE_ARN=
EMBEDDING_BATCH_MIN_DOCUMENTS=100
EMBEDDING_BATCH_MAX_DOCUMENTS=50000
EMBEDDING_BATCH_ACCUMULATION_TIMEOUT_SECONDS=300
EMBEDDING_BATCH_ACCUMULATION_POLL_INTERVAL=10
EMBEDDING_BATCH_MONITOR_POLL_INTERVAL=300


