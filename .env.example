# Database Configuration
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USERNAME=omni
DATABASE_PASSWORD=omni
DATABASE_NAME=omni
DATABASE_SSL=false
DB_MAX_CONNECTIONS=10
DB_ACQUIRE_TIMEOUT_SECONDS=3

# Redis Configuration
REDIS_URL=redis://redis:6379

# Core Service Ports
SEARCHER_PORT=3001
INDEXER_PORT=3002
AI_SERVICE_PORT=3003
WEB_PORT=3000

# Connector Service Ports
GOOGLE_CONNECTOR_PORT=4001
SLACK_CONNECTOR_PORT=4002
ATLASSIAN_CONNECTOR_PORT=4003
WEB_CONNECTOR_PORT=4004
CONNECTOR_MANAGER_PORT=4005

# Optional Service Ports
VLLM_PORT=8000 # For local LLMs via vLLM
VLLM_EMBEDDINGS_PORT=8001 # For local embedding models via vLLM

# Service URLs (for inter-service communication)
SEARCHER_URL=http://searcher:${SEARCHER_PORT}
INDEXER_URL=http://indexer:${INDEXER_PORT}
AI_SERVICE_URL=http://ai:${AI_SERVICE_PORT}
CONNECTOR_MANAGER_URL=http://connector-manager:${CONNECTOR_MANAGER_PORT}
GOOGLE_CONNECTOR_URL=http://google-connector:${GOOGLE_CONNECTOR_PORT}
SLACK_CONNECTOR_URL=http://slack-connector:${SLACK_CONNECTOR_PORT}
ATLASSIAN_CONNECTOR_URL=http://atlassian-connector:${ATLASSIAN_CONNECTOR_PORT}
WEB_CONNECTOR_URL=http://web-connector:${WEB_CONNECTOR_PORT}

# Optional service URLs
VLLM_URL=http://vllm:${VLLM_PORT}/v1
VLLM_EMBEDDINGS_URL=http://embeddings:${VLLM_EMBEDDINGS_PORT}/v1

# Connector Manager Configuration
MAX_CONCURRENT_SYNCS=10
MAX_CONCURRENT_SYNCS_PER_TYPE=3
SCHEDULER_POLL_INTERVAL_SECONDS=60
STALE_SYNC_TIMEOUT_MINUTES=10

# Session Configuration
SESSION_SECRET=your-session-secret-key-change-in-production
SESSION_COOKIE_NAME=auth-session
SESSION_DURATION_DAYS=7

# Application Configuration
APP_URL=http://localhost:3000
OMNI_DOMAIN=localhost
ACME_EMAIL=admin@yourcompany.com

# Feature Flags
AI_ANSWER_ENABLED=true
AI_FIRST_SEARCH_ENABLED=true

# AI Service Configuration
AI_WORKERS=2 # The number of workers to spawn in the omni-ai service
MODEL_PATH=/models

# Searcher Service Configuration
RAG_CONTEXT_WINDOW=2 # The number of surrounding chunks to fetch in RAG search
SEMANTIC_SEARCH_TIMEOUT_MS=1000 # Semantic search (vector search) will timeout if it takes longer than this

# Google Workspace Connector
GOOGLE_SYNC_INTERVAL_SECONDS=86400
GOOGLE_WEBHOOK_URL=https://yourdomain.com/google-webhook
WEBHOOK_RENEWAL_CHECK_INTERVAL_SECONDS=3600
GOOGLE_MAX_AGE_DAYS=712 # Documents older than this will not be indexed

# Slack Connector
SLACK_CLIENT_ID=your-slack-client-id
SLACK_CLIENT_SECRET=your-slack-client-secret
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token

# Atlassian Connector
ATLASSIAN_CLIENT_ID=your-atlassian-client-id
ATLASSIAN_CLIENT_SECRET=your-atlassian-client-secret

# Web Connector Configuration
WEB_SYNC_INTERVAL_SECONDS=86400  # Daily recrawl (24 hours)

# Log level for all rust services
RUST_LOG=info
RUST_BACKTRACE=

# =============================================================================
# Embedding Provider Configuration
# =============================================================================
# One of: local, jina, openai, cohere, bedrock
EMBEDDING_PROVIDER=local
EMBEDDING_MODEL=nomic-ai/nomic-embed-text-v1.5
EMBEDDING_DIMENSIONS=1024
EMBEDDING_API_KEY=
EMBEDDING_API_URL=${VLLM_EMBEDDINGS_URL}
EMBEDDING_MAX_MODEL_LEN=8192

# Batch embedding configuration (Bedrock only)
ENABLE_EMBEDDING_BATCH_INFERENCE=false
EMBEDDING_BATCH_S3_BUCKET=
EMBEDDING_BATCH_BEDROCK_ROLE_ARN=
EMBEDDING_BATCH_MIN_DOCUMENTS=100
EMBEDDING_BATCH_MAX_DOCUMENTS=50000
EMBEDDING_BATCH_ACCUMULATION_TIMEOUT_SECONDS=300
EMBEDDING_BATCH_ACCUMULATION_POLL_INTERVAL=10
EMBEDDING_BATCH_MONITOR_POLL_INTERVAL=300

# =============================================================================
# LLM Provider Configuration
# =============================================================================
# One of: vllm, anthropic, bedrock
LLM_PROVIDER=anthropic
LLM_MODEL=claude-sonnet-4-5
LLM_API_KEY=your-anthropic-api-key
LLM_API_URL=
LLM_SECONDARY_MODEL=claude-haiku-4-5
LLM_MAX_MODEL_LEN=

# AWS configuration (for bedrock provider)
AWS_REGION=

# Storage Backend. One of: s3, postgres
STORAGE_BACKEND=postgres

# Only required if STORAGE_BACKEND=s3
S3_BUCKET=your-s3-bucket
S3_REGION=your-s3-region

# Encryption Configuration. Used to encrypt sensitive keys to the connectors.
# Service account credentials, API keys/tokens, etc.
ENCRYPTION_KEY=your-encryption-key-must-be-at-least-32-characters-long
ENCRYPTION_SALT=your-salt-16-chars

# OpenTelemetry Configuration
# Leave OTEL_EXPORTER_OTLP_ENDPOINT empty for local-only telemetry
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_DEPLOYMENT_ID=
OTEL_DEPLOYMENT_ENVIRONMENT=production
SERVICE_VERSION=0.1.0
